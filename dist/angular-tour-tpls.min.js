!function(a,b,c){"use strict";angular.module("angular-tour",["angular-tour.tpls","angular-tour.tour"]),angular.module("angular-tour.tpls",["tour/tour.tpl.html"]),angular.module("tour/tour.tpl.html",[]).run(["$templateCache",function(a){a.put("tour/tour.tpl.html",'<div class="tour-tip">\n    <span class="tour-arrow tt-{{ ttPlacement }}"></span>\n    <div class="tour-content-wrapper">\n        <p ng-bind="ttContent"></p>\n        <a ng-click="setCurrentStep(getCurrentStep() + 1)" ng-bind="ttNextLabel" class="small button tour-next-tip"></a>\n        <a ng-click="closeTour()" class="tour-close-tip">&times;</a>\n    </div>\n</div>')}]),angular.module("angular-tour.tour",[]).constant("tourConfig",{placement:"top",animation:!0,nextLabel:"Next",scrollSpeed:500,offset:28}).controller("TourController",["$scope","orderedList",function(a,b){var c=this,d=c.steps=b();c.postTourCallback=angular.noop,c.postStepCallback=angular.noop,c.currentStep=0,a.$watch(function(){return c.currentStep},function(a){c.select(a)}),c.select=function(a){if(angular.isNumber(a)){c.unselectAllSteps();var b=d.get(a);b&&(b.ttOpen=!0),c.currentStep!==a&&(c.currentStep=a),a>=d.getCount()&&c.postTourCallback(),c.postStepCallback()}},c.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)?d.set(a.index,a):d.push(a)},c.unselectAllSteps=function(){d.forEach(function(a){a.ttOpen=!1})},c.cancelTour=function(){c.unselectAllSteps(),c.postTourCallback()},a.openTour=function(){var a=c.currentStep>=d.getCount()||c.currentStep<0?0:c.currentStep;c.select(a)},a.closeTour=function(){c.cancelTour()}}]).directive("tour",["$parse",function(a){return{controller:"TourController",restrict:"EA",scope:!0,link:function(b,c,d,e){if(!angular.isDefined(d.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";var f=a(d.step);b.$watch(d.step,function(a){e.currentStep=a}),e.postTourCallback=function(){angular.isDefined(d.postTour)&&b.$parent.$eval(d.postTour)},e.postStepCallback=function(){angular.isDefined(d.postStep)&&b.$parent.$eval(d.postStep)},b.setCurrentStep=function(a){f.assign(b.$parent,a),e.currentStep=a},b.getCurrentStep=function(){return e.currentStep}}}}]).directive("tourtip",["$window","$compile","$interpolate","$timeout","scrollTo","tourConfig",function(a,b,c,d,e,f){var g=(c.startSymbol(),c.endSymbol(),"<div tour-popup></div>");return{require:"^tour",restrict:"EA",scope:!0,link:function(c,h,i,j){function k(){var b,d,g,i,j,k,l;if(c.ttContent){m.css({display:"block"}),m.removeClass("ng-hide"),h.after(m),l=h.children().eq(0).length>0?h.children().eq(0):h;var n=function(){switch(b=l[0],d=m[0].offsetWidth,g=m[0].offsetHeight,k=l[0].offsetWidth,j=l[0].offsetHeight,c.ttPlacement){case"right":i={top:b.offsetTop,left:b.offsetLeft+k+c.ttOffset};break;case"bottom":i={top:b.offsetTop+j+c.ttOffset,left:b.offsetLeft};break;case"left":i={top:b.offsetTop,left:b.offsetLeft-d-c.ttOffset};break;default:i={top:b.offsetTop-g-c.ttOffset,left:b.offsetLeft}}i.top+="px",i.left+="px",m.css(i),e(m,-200,-300,f.scrollSpeed)};angular.element(a).bind("resize."+c.$id,function(){n()}),n()}}function l(){m.addClass("ng-hide"),angular.element(a).unbind("resize."+c.$id)}i.$observe("tourtip",function(a){c.ttContent=a}),i.$observe("tourtipPlacement",function(a){c.ttPlacement=a||f.placement}),i.$observe("tourtipNextLabel",function(a){c.ttNextLabel=a||f.nextLabel}),i.$observe("tourtipOffset",function(a){c.ttOffset=parseInt(a,10)||f.offset}),c.ttOpen=!1,c.ttAnimation=f.animation,c.index=parseInt(i.tourtipStep,10);var m=b(g)(c);j.addStep(c),d(function(){c.$watch("ttOpen",function(a){a?k():l()})},500),c.$on("$destroy",function(){angular.element(a).unbind("resize."+c.$id),m.remove(),m=null})}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(a,b,c){}}}).factory("orderedList",function(){var a=function(){this.map={},this._array=[]};a.prototype.set=function(a,b){if(angular.isNumber(a))if(a in this.map)this.map[a]=b;else{if(a<this._array.length){var c=a-1>0?a-1:0;this._array.splice(c,0,a)}else this._array.push(a);this.map[a]=b,this._array.sort(function(a,b){return a-b})}},a.prototype.indexOf=function(a){for(var b in this.map)if(this.map.hasOwnProperty(b)&&this.map[b]===a)return Number(b)},a.prototype.push=function(a){var b=this._array[this._array.length-1]+1||0;this._array.push(b),this.map[b]=a,this._array.sort(function(a,b){return a-b})},a.prototype.remove=function(a){var b=this._array.indexOf(a);if(-1===b)throw new Error("key does not exist");this._array.splice(b,1),delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return this._array.length},a.prototype.forEach=function(a){for(var b,c,d=0;d<this._array.length;d++)b=this._array[d],c=this.map[b],a(c,b)},a.prototype.first=function(){var a,b;return a=this._array[0],b=this.map[a]};var b=function(){return new a};return b}).factory("scrollTo",["$window",function(a){return function(b,c,d,e){b?(c=c||-100,d=d||-100,e=e||500,a.scrollTo(b[0].offsetLeft+d,b[0].offsetTop+c)):a.scrollTo(0,0)}}])}(window,document);